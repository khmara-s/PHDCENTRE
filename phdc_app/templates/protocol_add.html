{% extends 'dissertation.html' %}
{% load crispy_forms_tags %}

{% block homea-cards-list-content %}
<div class="container mt-3" style="width: 95%; font-size: 14px;">
    <form method="POST" enctype="multipart/form-data" class="card p-3 mt-5" autocomplete="off" novalidate id="diss-creation-form" style="border-radius: 30px; border-color: #e9ebee;">  <!-- Add enctype attribute -->
        {% csrf_token %}
        <div class="card p-3 border-dark text-center" style="font-size: 18px; font-weight: 400;">
            {% block diss-add-title %}
            <span><i class="ri-sticky-note-add-line" id="form-section-title-i" style="color: #92e3a9;"></i>Створення протоколу</span>
            {% endblock diss-add-title %}  
        </div>
        <div class="row">
            <div class="col-2">{{ form.number|as_crispy_field }}</div>
            <div class="col-2">{{ form.date|as_crispy_field }}</div>
        </div>
        <div class="row">
            <div class="col-2">{{ form.department_decision|as_crispy_field }}</div>
            <div class="col-2">{{ form.department_id|as_crispy_field }}</div>
        </div>
        <div class="row">
            <div class="col-12">
                <label for="id_file" class="custom-file-upload btn btn-secondary">
                    Виберіть файл
                </label>
                {{ form.file|as_crispy_field }}
                <span id="file-selected">Файл не вибрано</span>
            </div>
        </div>
        <br>
        <hr>
        <button type="submit" class="btn btn-dark mt-3" id="form-main-btn">Зберегти</button>  
    </form>
</div>

<style>
    .custom-file-upload {
        display: inline-block;
        cursor: pointer;
    }
    #id_file {
        display: none;
    }
    .col-12 {
        width: 100%;
    }
</style>
<script>
    document.getElementById('id_file').addEventListener('change', function() {
        var fileName = this.files[0].name;
        document.getElementById('file-selected').textContent = fileName ? fileName : 'Файл не вибрано';
    });
</script>
{% endblock homea-cards-list-content %}